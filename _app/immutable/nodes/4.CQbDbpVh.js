import{a as g,t as L,c as pt,d as X}from"../chunks/disclose-version.DGh4SVgo.js";import{aC as Rt,b as Bt,aD as It,e as Kt,aE as Qt,j as yt,Z as Gt,aF as Zt,g as s,a as Vt,a1 as A,_ as I,$ as J,a0 as Xt,aG as Yt,a5 as $t,a2 as U,aa as dt,f as w,a3 as k}from"../chunks/runtime.BS781kwU.js";import{d as te,e as ee,s as K}from"../chunks/render.BIct6zAy.js";import{i as R}from"../chunks/if.BlYNRVzE.js";import{e as Y,i as ht}from"../chunks/each.7NS3ECAz.js";import{h as ae}from"../chunks/svelte-head.D7p4ot7Y.js";import{r as re,a as gt,s as bt}from"../chunks/attributes.H1cHvVAt.js";import{p as se,a as ut}from"../chunks/props.CBl7DOSH.js";import{s as ne,a as oe}from"../chunks/store.BSYC10i9.js";import{p as ie,i as ce,a as le,r as de}from"../chunks/entry.KqC1p3Ax.js";function _t(t,a,c){Rt(()=>{var n=Bt(()=>a(t,c==null?void 0:c())||{});if(c&&(n!=null&&n.update)){var i=!1,m={};It(()=>{var f=c();Kt(f),i&&Qt(m,f)&&(m=f,n.update(f))}),i=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function ue(t,a){var c=t.__className,n=ve(a);yt&&t.className===n?t.__className=n:(c!==n||yt&&t.className!==n)&&(a==null?t.removeAttribute("class"):t.className=n,t.__className=n)}function ve(t){return t??""}function T(t,a,c){if(c){if(t.classList.contains(a))return;t.classList.add(a)}else{if(!t.classList.contains(a))return;t.classList.remove(a)}}function fe(t){const a=JSON.parse(t);return a.data&&(a.data=ie(a.data)),a}function ot(t){return HTMLElement.prototype.cloneNode.call(t)}function me(t,a=()=>{}){const c=async({action:i,result:m,reset:f=!0,invalidateAll:p=!0})=>{m.type==="success"&&(f&&HTMLFormElement.prototype.reset.call(t),p&&await ce()),(location.origin+location.pathname===i.origin+i.pathname||m.type==="redirect"||m.type==="error")&&le(m)};async function n(i){var j,D,E,O,r;if(((j=i.submitter)!=null&&j.hasAttribute("formmethod")?i.submitter.formMethod:ot(t).method)!=="post")return;i.preventDefault();const f=new URL((D=i.submitter)!=null&&D.hasAttribute("formaction")?i.submitter.formAction:ot(t).action),p=(E=i.submitter)!=null&&E.hasAttribute("formenctype")?i.submitter.formEnctype:ot(t).enctype,y=new FormData(t),M=(O=i.submitter)==null?void 0:O.getAttribute("name");M&&y.append(M,((r=i.submitter)==null?void 0:r.getAttribute("value"))??"");const F=new AbortController;let H=!1;const z=await a({action:f,cancel:()=>H=!0,controller:F,formData:y,formElement:t,submitter:i.submitter})??c;if(H)return;let x;try{const e=new Headers({accept:"application/json","x-sveltekit-action":"true"});p!=="multipart/form-data"&&e.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(p)?p:"application/x-www-form-urlencoded");const l=p==="multipart/form-data"?y:new URLSearchParams(y),d=await fetch(f,{method:"POST",headers:e,cache:"no-store",body:l,signal:F.signal});x=fe(await d.text()),x.type==="error"&&(x.status=d.status)}catch(e){if((e==null?void 0:e.name)==="AbortError")return;x={type:"error",error:e}}z({action:f,formData:y,formElement:t,update:e=>c({action:f,result:x,reset:e==null?void 0:e.reset,invalidateAll:e==null?void 0:e.invalidateAll}),result:x})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",n)}}}var xt="mz3PUW_p",wt=["#FFC700","#FF0000","#2E3191","#41BBC7"],kt=3500,jt=.5,At=150,Pt="mix",Lt=12,Mt="",zt=!0,Et=800,St=1600;function pe(t,a={}){let{colors:c=wt,duration:n=kt,force:i=jt,particleCount:m=At,particleShape:f=Pt,particleSize:p=Lt,particleClass:y=Mt,destroyAfterDone:M=zt,stageHeight:F=Et,stageWidth:H=St}=a;(function(r){if(document.querySelector("style[data-neoconfetti]"))return;const e=it("style");e.dataset.neoconfetti="",e.textContent=r,ct(document.head,e)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",F+"px");let N=[],z=[];const x=()=>Q(P()*(_e-1)),j=(r,e)=>f!=="rectangles"&&(r==="circles"||xe(e));function D(r,e){const l=x(),d=j(f,l),o=(b,S)=>r.style.setProperty(b,S+"");o("--xlp",lt($(Nt(e,90)-180),0,180,-H/2,H/2)+"px"),o("--dc",n-Q(1e3*P())+"ms");const u=P()<he?B(P()*ge,2):0;o("--x1",u),o("--x2",-1*u),o("--x3",u),o("--x4",B($(lt($(Nt(e,90)-180),0,180,-1,1)),4)),o("--y1",B(P()*Ut,4)),o("--y2",B(P()*i*(Ft()?1:-1),4)),o("--y3",Ut),o("--y4",B(be(lt($(e-180),0,180,i,-i),0),4)),o("--w",(d?p:Q(4*P())+p/2)+"px"),o("--h",(d?p:Q(2*P())+p)+"px");const v=l.toString(2).padStart(3,"0").split("");o("--hr",v.map(b=>+b/2+"").join(" ")),o("--r",v.join(" ")),o("--rd",B(P()*(ye-Wt)+Wt)+"ms"),o("--br",d?"50%":0)}let E;function O(){t.innerHTML="",clearTimeout(E),N=Ht(m,c),z=function(r,e=[],l){const d=[];for(const{color:o}of e){const u=it("div");u.className=`${xt} ${l}`,u.style.setProperty("--bgc",o);const v=it("div");ct(u,v),ct(r,u),d.push(u)}return d}(t,N,y);for(const[r,e]of Ct(z))D(e,N[+r].degree);E=setTimeout(()=>{M&&(t.innerHTML="")},n)}return O(),{update(r){const e=r.particleCount??At,l=r.particleShape??Pt,d=r.particleSize??Lt,o=r.particleClass??Mt,u=r.colors??wt,v=r.stageHeight??Et,b=r.duration??kt,S=r.force??jt,h=r.stageWidth??St,_=r.destroyAfterDone??zt;N=Ht(e,u);let C=!1;if(e===m){z=Array.from(t.querySelectorAll(`.${xt}`));for(const[G,{color:tt}]of Ct(N)){const q=z[+G];JSON.stringify(c)!==JSON.stringify(u)&&q.style.setProperty("--bgc",tt),l!==f&&q.style.setProperty("--br",j(l,x())?"50%":"0"),o!==y&&(y&&q.classList.remove(y),o&&q.classList.add(o))}}else C=!0;M&&!_&&clearTimeout(E),t.style.setProperty("--sh",v+"px"),n=b,c=u,i=S,m=e,f=l,p=d,y=o,M=_,F=v,H=h,C&&O()},destroy(){t.innerHTML="",clearTimeout(E)}}}var Wt=200,ye=800,he=.1,ge=.3,Ut=.5,$=Math.abs,P=Math.random,Q=Math.round,be=Math.max,it=t=>document.createElement(t),ct=(t,a)=>t.appendChild(a),Ht=(t,a)=>Array.from({length:t},(c,n)=>({color:a[n%a.length],degree:360*n/t})),B=(t,a=2)=>Q((t+Number.EPSILON)*10**a)/10**a,lt=(t,a,c,n,i)=>(t-a)*(i-n)/(c-a)+n,Nt=(t,a)=>t+a>360?t+a-360:t+a,Ft=()=>P()>.5,Ct=Object.entries,_e=6,xe=t=>t!==1&&Ft();const Dt="(prefers-reduced-motion: reduce)",we=()=>window.matchMedia(Dt).matches,ke=de(we(),t=>{{const a=n=>{t(n.matches)},c=window.matchMedia(Dt);return c.addEventListener("change",a),()=>{c.removeEventListener("change",a)}}});function Tt(t,a,c){var i;t.preventDefault();const n=t.target.getAttribute("data-key");n==="backspace"?(dt(a,ut(s(a).slice(0,-1))),(i=c())!=null&&i.badGuess&&c(c().badGuess=!1,!0)):s(a).length<5&&dt(a,s(a)+n)}var je=L('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),Ae=L('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Pe=L('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div class="row svelte-1pg2j5l"></div>',1),Le=L('<p class="svelte-1pg2j5l"> </p>'),Me=L('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),ze=L('<button formaction="?/update" name="key"> </button>'),Ee=L('<div class="row svelte-1pg2j5l"></div>'),Se=L('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),We=L('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Ue=L('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Be(t,a){Gt(a,!0);const c=ne(),n=()=>oe(ke,"$reducedMotion",c);let i=se(a,"form",15),m=w(()=>a.data.answers.at(-1)==="xxxxx"),f=w(()=>s(m)?-1:a.data.answers.length),p=Zt(ut(a.data.guesses[s(f)]||""));Vt(()=>{dt(p,ut(a.data.guesses[s(f)]||""))});let y=w(()=>s(p).length===5);const M=w(()=>{let r={},e={};return a.data.answers.forEach((l,d)=>{const o=a.data.guesses[d];for(let u=0;u<5;u+=1){const v=o[u];l[u]==="x"?(r[v]="exact",e[v]="correct"):r[v]||(r[v]=l[u]==="c"?"close":"missing",e[v]=l[u]==="c"?"present":"absent")}}),{classnames:r,description:e}}),F=w(()=>s(M).classnames),H=w(()=>s(M).description);function N(r){var e;r.metaKey||r.key==="Enter"&&!s(y)||(e=document.querySelector(`[data-key="${r.key}" i]`))==null||e.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}var z=Ue();ee("keydown",Yt,N),ae(r=>{var e=je();$t.title="Sverdle",g(r,e)});var x=A(I(z),2),j=A(U(x),2);Y(j,20,()=>Array.from(Array(6).keys()),r=>r,(r,e)=>{var l=Pe();const d=w(()=>e===s(f));var o=I(l),u=U(o);k(o);var v=A(o,2);Y(v,20,()=>Array.from(Array(5).keys()),b=>b,(b,S)=>{var h=Ae();const _=w(()=>s(d)?s(p):a.data.guesses[e]),C=w(()=>{var W;return(W=a.data.answers[e])==null?void 0:W[S]}),G=w(()=>{var W;return((W=s(_))==null?void 0:W[S])??""}),tt=w(()=>s(d)&&S===s(_).length),q=w(()=>s(C)==="x"),vt=w(()=>s(C)==="c"),ft=w(()=>s(C)==="_");var mt=U(h),et=A(mt),Ot=U(et);R(Ot,()=>s(q),W=>{var Z=X("(correct)");g(W,Z)},W=>{var Z=pt(),qt=I(Z);R(qt,()=>s(vt),rt=>{var V=X("(present)");g(rt,V)},rt=>{var V=pt(),Jt=I(V);R(Jt,()=>s(ft),st=>{var nt=X("(absent)");g(st,nt)},st=>{var nt=X("empty");g(st,nt)},!0),g(rt,V)},!0),g(W,Z)}),k(et);var at=A(et,2);re(at),k(h),J(()=>{T(h,"exact",s(q)),T(h,"close",s(vt)),T(h,"missing",s(ft)),T(h,"selected",s(tt)),K(mt,`${s(G)??""} `),at.disabled=!s(d),gt(at,s(G))}),g(b,h)}),k(v),J(()=>{K(u,`Row ${e+1}`),T(v,"current",s(d))}),g(r,l)}),k(j);var D=A(j,2),E=U(D);R(E,()=>s(m)||a.data.answers.length>=6,r=>{var e=Me(),l=I(e);R(l,()=>!s(m)&&a.data.answer,u=>{var v=Le(),b=U(v);k(v),J(()=>K(b,`the answer was "${a.data.answer??""}"`)),g(u,v)});var d=A(l,2),o=U(d);k(d),J(()=>K(o,`${(s(m)?"you won :)":"game over :(")??""} play again?`)),g(r,e)},r=>{var e=Se(),l=U(e),d=A(l,2);d.__click=[Tt,p,i];var o=A(d,2);Y(o,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],ht,(u,v)=>{var b=Ee();Y(b,21,()=>v,ht,(S,h)=>{var _=ze();_.__click=[Tt,p,i];var C=U(_,!0);k(_),J(()=>{bt(_,"data-key",s(h)),ue(_,`${s(F)[s(h)]??""} svelte-1pg2j5l`),_.disabled=s(y),gt(_,s(h)),bt(_,"aria-label",`${s(h)??""} ${(s(H)[s(h)]||"")??""}`),K(C,s(h))}),g(S,_)}),k(b),g(u,b)}),k(e),J(()=>{l.disabled=!s(y),T(l,"selected",s(y))}),g(r,e)}),k(D),k(x),_t(x,(r,e)=>me(r,e),()=>()=>({update:r})=>{r({reset:!1})});var O=A(x,2);R(O,()=>s(m),r=>{var e=We();_t(e,(l,d)=>pe(l,d),()=>({particleCount:n()?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),g(r,e)}),J(()=>{var r;T(j,"playing",!s(m)),T(j,"bad-guess",(r=i())==null?void 0:r.badGuess)}),g(t,z),Xt()}te(["click"]);export{Be as component};
